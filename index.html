<html>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ"
    crossorigin="anonymous"></script>
<script src="https://kit.fontawesome.com/bd3ff733cf.js" crossorigin="anonymous"></script>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Lato&family=Noto+Sans+TC&display=swap');
</style>
<script></script>
<script src="https://kit.fontawesome.com/bd3ff733cf.js" crossorigin="anonymous"></script>
<style></style>
<script></script>
<script src="https://kit.fontawesome.com/bd3ff733cf.js" crossorigin="anonymous"></script>
<style></style>

<body>

  <!--標題列 -->
  <nav class="navbar sticky-top">
    <div class="container-fluid nav-title">
      <p class="nav-word">🥑 a<word class="specialize">VOCAB</word>o</p>
    </div>
  </nav>

  <!-- 滑動介紹 -->
  <div class="car-container">
    <div id="carouselExampleCaptions" class="carousel slide" data-bs-ride="false">
      <div class="carousel-indicators">
        <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
        <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1" aria-label="Slide 2"></button>
        <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2" aria-label="Slide 3"></button>
      </div>
      <div class="carousel-inner">
        <div class="carousel-item active">
          <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEghBW-NDiuGpbY4H359BbdAjI5GC9NUXJme0ImQYdiPUKt34VTdjXNNOmKSmqF0Gp54OTVniwq5BUcHx4Reynvj5F56GgEa4-L3tIxoCwPLiW0lBVeJXtIS3ZclYXeeV4-_qRKSCO7lOGOYRR81zOjzQ1FrxN9pJ1uSVkfYqKC-XTZEZVIf8LxSLXVUdQ/s320/%E8%9E%A2%E5%B9%95%E6%93%B7%E5%8F%96%E7%95%AB%E9%9D%A2%202023-05-28%20103709.png" alt="...">
          <div class="carousel-caption d-md-block">
            <h5>aVOCABo</h5>
            <p>你的背單字小幫手</p>
            <i class=" fa-brands fa-instagram"></i> @a.vocab.o
          </div>
        </div>
        <div class="carousel-item">
          <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEghBW-NDiuGpbY4H359BbdAjI5GC9NUXJme0ImQYdiPUKt34VTdjXNNOmKSmqF0Gp54OTVniwq5BUcHx4Reynvj5F56GgEa4-L3tIxoCwPLiW0lBVeJXtIS3ZclYXeeV4-_qRKSCO7lOGOYRR81zOjzQ1FrxN9pJ1uSVkfYqKC-XTZEZVIf8LxSLXVUdQ/s320/%E8%9E%A2%E5%B9%95%E6%93%B7%E5%8F%96%E7%95%AB%E9%9D%A2%202023-05-28%20103709.png" alt="...">
          <div class="carousel-caption d-md-block">
            <h5>aVOCABo</h5>
            <p>
              我需要你的回饋!!<br><i class="fa-solid fa-link"> <a href="https://www.surveycake.com/s/gl0xB" target="_blank">使用回饋</a>
              </i>
            </p>
          </div>
        </div>
        <div class="carousel-item">
          <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEghBW-NDiuGpbY4H359BbdAjI5GC9NUXJme0ImQYdiPUKt34VTdjXNNOmKSmqF0Gp54OTVniwq5BUcHx4Reynvj5F56GgEa4-L3tIxoCwPLiW0lBVeJXtIS3ZclYXeeV4-_qRKSCO7lOGOYRR81zOjzQ1FrxN9pJ1uSVkfYqKC-XTZEZVIf8LxSLXVUdQ/s320/%E8%9E%A2%E5%B9%95%E6%93%B7%E5%8F%96%E7%95%AB%E9%9D%A2%202023-05-28%20103709.png" alt="...">
          <div class="carousel-caption d-md-block">
            <h5>aVOCABo</h5>
            <p>出錯了嗎?填表單告訴我!<i class="fa-solid fa-link"> <a href="https://www.surveycake.com/s/wWM2o" target="_blank">錯誤回報</a>
              </i></p>
          </div>
        </div>
      </div>
      <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>
    </div>
    <br>
  </div>
  <div class="sec-container">

    <!--最新消息區塊 -->
    <section class="new-content">

      <div class="card card-new-content">
        <h5 class="card-header">最新消息</h5>
        <div class="card-body">
          <p class="card-text"><i class="fa-solid fa-bullhorn">敬請期待</i></p>
        </div>
      </div>
    </section>

    <!--課本區塊 -->
    <section class="textbook">
      <div class="card card-textbook">
        <h5 class="card-header">英文課本</h5>
        <div class="card-body">
          <p class="card-text"><i class="fa-solid fa-bullhorn">敬請期待</i></p>
          <div class="btn-group">
            <button class="btn btn-outline-primary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
              英文課本
            </button>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item teb-l7" href="#">L7生字</a></li>
              <li><a class="dropdown-item" href="#">2</a></li>
              <li><a class="dropdown-item" href="#">3</a></li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- 單字書區塊 -->
    <section class="vocbook">
      <div class="card card-vocbook">
        <h5 class="card-header">核心字彙</h5>
        <div class="card-body">
          <p class="card-text"><i class="fa-solid fa-bullhorn">敬請期待</i></p>
          <div class="btn-group">
            <button class="btn btn-outline-dark dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
              核心字彙 </button>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="#">1</a></li>
              <li><a class="dropdown-item" href="#">2</a></li>
              <li><a class="dropdown-item" href="#">3</a></li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!--雜誌區塊 -->
    <section class="magazine">
      <div class="card card-magazine">
        <h5 class="card-header">LIVE雜誌</h5>
        <div class="card-body">
          <p class="card-text"><i class="fa-solid fa-bullhorn">敬請期待</i></p>
          <div class="btn-group">
            <button class="btn btn-outline-info dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
              LIVE雜誌 </button>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item mag-u1" href="#">1</a></li>
              <li><a class="dropdown-item mag-u2" href="#">2</a></li>
              <li><a class="dropdown-item mag-u3" href="#">3</a></li>
            </ul>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- 測驗區塊 -->
  <section class="quiz">
    <ul class="nav nav-tabs" id="myTab" role="tablist">
      <li class="nav-item nav-vocab" role="presentation">
        <button class="nav-link active fw-bold" id="home-tab" data-bs-toggle="tab" data-bs-target="#home-tab-pane" type="button" role="tab" aria-controls="home-tab-pane" aria-selected="true">單字</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link fw-bold" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile-tab-pane" type="button" role="tab" aria-controls="profile-tab-pane" aria-selected="false">拼字測驗</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link fw-bold" id="contact-tab" data-bs-toggle="tab" data-bs-target="#contact-tab-pane" type="button" role="tab" aria-controls="contact-tab-pane" aria-selected="false">選擇測驗</button>
      </li>
    </ul>
    <div class="tab-content" id="myTabContent">
      <div class="tab-pane fade show active" id="home-tab-pane" role="tabpanel" aria-labelledby="home-tab" tabindex="0">
        <ol class="list-group list-group-numbered vocab-list">
        </ol>
      </div>
      <div class="tab-pane fade" id="profile-tab-pane" role="tabpanel" aria-labelledby="profile-tab" tabindex="0">
        <div class="scorebox">
          <p class="vocinput-score"></p>
        </div>
        <h1 class="quiz-title"></h1>
        <div class="vocinput-container">
          <div class="input-underline">
            <input type="text" class="vocab-quiz-input" placeholder="請輸入文字">
            <span class="input-label get-hint"><i class="fa-solid fa-check"></i></span>
          </div>
          <div class="helpBtn"></div>
          <div class="vocab-quiz-inf"></div>
        </div>
      </div>

      <div class="tab-pane fade" id="contact-tab-pane" role="tabpanel" aria-labelledby="contact-tab" tabindex="0">
        <div class="multi-choose">
          <div class="scorebox">
            <p class="multi-score"></p>
          </div>
          <h1 class="multi-choose-title"></h1>
          <div class="option-container">
            <button id="option-1" type="button"></button>
            <button id="option-2" type="button"></button>
            <button id="option-3" type="button"></button>
            <button id="option-4" type="button"></button>
          </div>
          <dev></dev>
        </div>
      </div>
      <div class="tab-pane fade" id="disabled-tab-pane" role="tabpanel" aria-labelledby="disabled-tab" tabindex="0">...</div>
    </div>
  </section>

  <!--結果頁面 -->
  <section class="result">
    <div class="alert alert-primary result-alert" role="alert"></div>
    <div class="toast-container">
      <div class="toast review-toast" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header" style="background-color: #CEF09D;">
          <i class="fa-solid fa-magnifying-glass"></i> <strong class="me-auto"> 意見回饋</strong>
        </div>
        <div class="toast-body">請你協助填寫一份<a href="https://www.surveycake.com/s/gl0xB" target="_blank">小問卷</a>，一起讓aVOCABo變得更好:)
        </div>
      </div>

      <div class="toast error-toast" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header" style="background-color: #D6D58E;">
          <i class="fa-solid fa-bug"></i> <strong class="me-auto"> 回報錯誤</strong>
        </div>
        <div class="toast-body ">發現錯誤了嗎?想請你花一點點時間把問題<a href="https://www.surveycake.com/s/wWM2o" target="_blank">告訴我!!</a></div>
      </div>
    </div>
    <ol class="list-group list-group-numbered incorrect-list">
      <h3> 錯誤單詞清單</h3>
    </ol>

  </section>

  <!--頁尾 -->
  <footer class="footer">
    <h3>🥑aVOCABo</h3>
    <p>哈囉你好，我是aVOCABo的開發者，希望藉由這個網站解決高中生死記硬背英文單字的現象。</p>
    <i class="fa-solid fa-link"> <a href="https://www.surveycake.com/s/gl0xB" target="_blank">使用回饋</a>
    </i>
    <i class="fa-solid fa-link"> <a href="https://www.surveycake.com/s/wWM2o" target="_blank">&nbsp; 錯誤回報</a>
    </i>
    <p>任何問題請洽 Instagram: @a.vocab.o</p>
    <img src="https://SiteStates.com/show/image/33508.jpg" border="0" />
  </footer>
</body>
</html>

<style>
html,
.body {
  width: 390px;
  min-height: 844px;
  background-color: #f3f4f4;
}
.pop-btn {
  border-radius: 50%;
  border: 0px;
  fon-size: 30px;
  color: #f7ffeb;
  z-index: 5;
  background-color: #d49e48;
}
.navbar {
  display: flex;
  justify-content: flex-start;
  padding: 7px;
  padding-left: 12px;
  background-color: #e9e9e9;
  height: 60px;
}
.nav-title {
  font-size: 28px;
  font-weight: 650;
  color: #97bf6f;
}
.specialize {
  font-weight: 800;
  color: #f2b035;
}
.car-container {
  padding-top: 20px;
  display: flex;
  justify-content: center;
  align-content: center;
}
.fa-link {
  color: white;
  color: white;
}
img {
  border-radius: 25px;
}
.fa-instagram {
  font-size: 20px;
}
.card-img-top {
  max-height: 200px;
  width: 100%;
  object-fit: cover;
}
.sec-container {
  width: 390px;
  display: flex;
  flex-wrap: wrap;
  justify-content: space-evenly;
  align-content: flex-start;
}
.sec-container > section {
  width: 45%;
  box-sizing: border-box;
}
.new-content,
.textbook,
.vocbook,
.magazine {
  width: 100%;
  margin-top: 25px;
}
.card-new-content,
.card-textbook,
.card-vocbook,
.card-magazine {
  display: inline-block;
  width: 90%;
  min-height: 100px;
  max-height: 250px;
}
.card-header {
  font-weight: 650;
  padding: 15px;
}
.quiz {
  display: none;
  width: 100%;
  height: 100vh;
}
.card,
.card-body {
  margin-left: 5%;
  margin-right: 5%;
}
.list-group-item i {
  position: absolute;
  right: 0;
  margin-right: 10px;
}
.scorebox {
  display: flex;
  justify-content: flex-end;
}
.vocinput-score,
.multi-score {
  margin: 15px;
  margin-bottom: 0px;
  padding: 10px;
  border-radius: 20px;
  background-color: #cacaca;
  font-size: 20px;
}
.vocinput-container {
  margin-left: 2.5%;
  margin-right: 2.5%;
  padding-top: 20px;
  display: flex;
  flex-direction: column;
  justify-content: center;
}

.input-underline {
  position: relative;
  margin: 10px;
  border-width: 2px;
  border: none;
  border-bottom: 1px solid black;
  background-color: transparent;
}

.input-underline::before {
  content: "";
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 2px;
  background-color: black;
}

.input-underline input {
  border: none;
  outline: none;
  background: none;
  padding: 5px;
}

.input-label {
  font-weight: bold;
  color: blue;
  margin-left: 8px;
  position: absolute;
  right: 2.5%;
  bottom: 5px;
}
.helpBtn {
  margin-top: 15px;
  margin-bottom: 15px;
  font-weight: 700;
}
.quiz-title,
.multi-choose-title {
  margin-top: 2.5%;
  margin-bottom: 2.5%;
  margin-left: 2.5%;
}
.option-container {
  width: 100%;
}
#option-1,
#option-2,
#option-3,
#option-4 {
  width: 90%;
  padding: 12px;
  margin: 15px;
  display: flex;
  justify-content: flex-start;
}
.toast-body {
  font-size: 1.2rem;
  font-weight: bold;
}
.result {
  display: none;
}
.review-toast,
.error-toast {
  width: 95%;
  margin: 10px;
  font-size: 20px;
  font-weight: 300;
}
.footer {
  background-color: #d7be96;
  width: 100%;
  margin-top: 20px;
  padding: 15px;
}
</style>
<script>
    //彈出視窗
const popAlert = document.querySelector(".pop-toast");

//單字庫
let vocabs = [];

const tebL7voc = [
  "seek",
  "(v.)尋求；尋找",
  "series",
  "(n.)系列",
  "foundation",
  "(n.)基金會；基礎",
  "found",
  "(v.)創立；建設",
  "technology",
  "(n.)科技",
  "technological",
  "(adj.)科技的",
  "conference",
  "(n.)會議；研討會",
  "worth",
  "(adj.)值得...的；(n.)價值；意義",
  "worthy",
  "(adj.)值得...的",
  "increasingly",
  "(adv.)愈來愈",
  "increase",
  "(n.)(v.)增加",
  "organizer",
  "(n.)組織者；籌辦者",
  "organize",
  "(v.)組織；籌辦",
  "organization",
  "(n.)組織；機構",
  "broad",
  "(adj.)廣泛的；寬闊的",
  "broaden",
  "(v.)拓展",
  "range",
  "(v.)範圍包括；(n.)範圍；種類",
  "field",
  "(n.)領域",
  "philosophy",
  "(n.)哲學",
  "launch",
  "(n.)發行",
  "collection",
  "(n.)一堆；收藏品",
  "collect",
  "(v.)收藏",
  "numerous",
  "(adj.)許多的",
  "celebrity",
  "(n.)名人",
  "audience",
  "(n.)觀眾；聽眾",
  "fascination",
  "(n.)著迷；吸引力",
  "fascinate",
  "(v.)使人著迷；吸引",
  "fiction",
  "(n.)小說",
  "discuss",
  "(v.)探討；討論",
  "discussion",
  "(n.)討論",
  "method",
  "(n.)方法",
  "as well as",
  "(phr.)和；除了...以外",
  "for free",
  "(phr.)免費",
  "at present",
  "(phr.)目前",
  "give a try",
  "(phr.)嘗試",
  "broaden one's horizons",
  "(phr.)拓展視野",
  "slogan",
  "(n.)標語",
  "platform",
  "(n.)公開表達意見的機會；月臺；講臺",
  "upload",
  "(v.)上傳",
  "insight",
  "(n.)見解",
  "chef",
  "(n.)主廚",
  "blockbuster",
  "(n.)賣座鉅片"
];
vocabs.push(tebL7voc);

const verb = ["run", "(v.)跑", "jump", "(v.)跳"];
vocabs.push(verb);

const adj = ["pretty", "(adj.)漂亮的", "fast", "(adj.)快的"];
vocabs.push(adj);

//宣告區塊
const nav = document.querySelector(".navbar");
const carSection = document.querySelector(".car-container");
const secSection = document.querySelector(".sec-container");
const newsSection = document.querySelector(".new-content");
const texSection = document.querySelector(".textbook");
const vocSection = document.querySelector(".vocbook");
const magSection = document.querySelector(".magazine");
const quizSection = document.querySelector(".quiz");
const resultSection = document.querySelector(".result");

//宣告節點
const magU1 = document.querySelector(".mag-u1");
const magU2 = document.querySelector(".mag-u2");
const magU3 = document.querySelector(".mag-u3");
const tebL7 = document.querySelector(".teb-l7");
const vocabNav = document.querySelector(".nav-vocab");
const vocabListOl = document.querySelector(".vocab-list");
const vocabQuizTitle = document.querySelector(".quiz-title");
const vocabQuizScore = document.querySelector(".vocinput-score");
const vocabQuizInput = document.querySelector(".vocab-quiz-input");
const vocabQuizHint = document.querySelector(".get-hint");
const vocabQuizInf = document.querySelector(".vocab-quiz-inf");
const vocabQuizHelpBtn = document.querySelector(".helpBtn");
const multiChoTitle = document.querySelector(".multi-choose-title");
const multiChoOP1 = document.getElementById("option-1");
const multiChoOP2 = document.getElementById("option-2");
const multiChoOP3 = document.getElementById("option-3");
const multiChoOP4 = document.getElementById("option-4");
const multiQuizScore = document.querySelector(".multi-score");
const resultAlert = document.querySelector(".result-alert");
const reviewToast = document.querySelector(".review-toast");
const errorToast = document.querySelector(".error-toast");
const incorrectList = document.querySelector(".incorrect-list");

//監聽器
magU1.addEventListener("click", function () {
  quizFunctions();
});
magU2.addEventListener("click", function () {
  quizFunctions();
});
magU3.addEventListener("click", function () {
  quizFunctions();
});
tebL7.addEventListener("click", function () {
  quizFunctions(tebL7voc, "L7生字");
});

function quizFunctions(vocabList, title) {
  hideSection();
  fillVocabList(vocabList, title);
  fillQuizTitle(vocabList, title);
  runMultiChoose(vocabList, title);
}

//初始化函式
function hideSection() {
  carSection.innerHTML = "";
  newsSection.style = "display: none;";
  texSection.style = "display: none;";
  vocSection.style = "display: none;";
  magSection.style = "display: none;";
  quizSection.style = "display: block;";
}

//單詞清單
function fillVocabList(vocabList, title) {
  for (let i = 0; i < vocabList.length; i++) {
    let listInnerText = `<li class="list-group-item d-flex justify-content-between align-items-start">
    <div class="ms-2 me-auto">
      <div class="fw-bold vocabListItem">
        ${vocabList[i]}
        <i class="fa-regular fa-star fa"></i>
      </div>
      <div>${vocabList[(i += 1)]}</div>
    </div>
      </li>`;
    vocabListOl.innerHTML += listInnerText;
  }
}

//單詞清單星號
const vocabListStar = document.querySelector(".vocab-list");

vocabListStar.addEventListener("click", function (event) {
  if (event.target.matches(".fa-star")) {
    const targetStar = event.target;

    if (targetStar.matches(".fa-regular")) {
      targetStar.classList.remove("fa-regular");
      targetStar.classList.add("fa-solid");
      targetStar.style.color = "#ffcf24";
    } else if (targetStar.matches(".fa-solid")) {
      targetStar.classList.remove("fa-solid");
      targetStar.classList.add("fa-regular");
      targetStar.style.color = "";
    }
  }
});

//輸入測驗
let inputAnswer;
let correctAnswer;
let correctAnswerCount;
let currentVocabList;
let inputQuesScore = 0;
let inputQuesCount = 0;
let correctAtFirstTime = true;
let incorrectInput = [];
let chiAnswer;
vocabQuizHint.addEventListener("click", function () {
  vocabQuizInf.innerHTML = `<i class="fa-solid fa-triangle-exclamation"> 請輸入正確答案</i><span>"${currentVocabList[correctAnswerCount]}</span>"`;
  correctAtFirstTime = false;
  if (!incorrectInput.includes(correctAnswer)) {
    incorrectInput.push(correctAnswer);
    incorrectInput.push(chiAnswer);
  }
});

async function fillQuizTitle(vocabList, title) {
  currentVocabList = vocabList;
  for (let i = 1; i < vocabList.length; i += 2) {
    inputQuesCount++;
    correctAtFirstTime = true;
    chiAnswer = vocabList[i];
    vocabQuizTitle.innerText = `${inputQuesCount}.${chiAnswer}`;
    vocabQuizScore.innerText = `${inputQuesScore}/${vocabList.length / 2}`;
    correctAnswer = vocabList[i - 1];
    correctAnswerCount = i - 1;
    if (chiAnswer.includes("phr.")) {
      vocabQuizHelpBtn.innerHTML = `
      <h4>自動鍵盤(請善用它避免判讀錯誤)</h4>
        <button type="button" class="btn btn-primary one">one</button>
        <button type="button" class="btn btn-primary oneself">oneself</button>
        <button type="button" class="btn btn-primary ones">one's</button>
        <button type="button" class="btn btn-primary toV">toV</button>
        <button type="button" class="btn btn-primary Ving">Ving</button>
        <br>
        <button type="button" class="btn btn-primary slash">/</button>
        <button type="button" class="btn btn-primary hyphen">-</button>
        <button type="button" class="btn btn-primary dots">...</button>
      `;
      document.querySelector(".one").addEventListener("click", function () {
        vocabQuizInput.value += "one ";
      });
      document.querySelector(".oneself").addEventListener("click", function () {
        vocabQuizInput.value += "oneself ";
      });
      document.querySelector(".ones").addEventListener("click", function () {
        vocabQuizInput.value += "one's ";
      });
      document.querySelector(".toV").addEventListener("click", function () {
        vocabQuizInput.value += "toV ";
      });
      document.querySelector(".Ving").addEventListener("click", function () {
        vocabQuizInput.value += "Ving ";
      });
      document.querySelector(".slash").addEventListener("click", function () {
        vocabQuizInput.value += "/";
      });
      document.querySelector(".hyphen").addEventListener("click", function () {
        vocabQuizInput.value += "-";
      });
      document.querySelector(".dots").addEventListener("click", function () {
        vocabQuizInput.value += "... ";
      });
    } else {
      vocabQuizHelpBtn.innerHTML = ``;
    }

    // 等待輸入
    const inputAnswer = await new Promise((resolve) => {
      vocabQuizInput.addEventListener("input", function listener() {
        const input = event.target.value.toLowerCase();
        if (input === correctAnswer) {
          vocabQuizInf.innerHTML = `
            <div class="toast" role="alert" aria-live="assertive" aria-atomic="true data-bs-delay="6000"">
              <div class="toast-header" style="background-color: #CEF09D;">
                <strong class="me-auto">Correct</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
              </div>
              <div class="toast-body">
                <i class="fa-regular fa-thumbs-up" style="color: #2b5aab;"></i> ${
                  vocabList[i - 1]
                }${vocabList[i]}
              </div>
            </div>
            `;
          if (chiAnswer.includes("phr.")) {
            document
              .querySelector(".one")
              .removeEventListener("click", function () {
                vocabQuizInput.innerText += "one ";
              });
            document
              .querySelector(".oneself")
              .removeEventListener("click", function () {
                vocabQuizInput.innerText += "oneself ";
              });
            document
              .querySelector(".ones")
              .removeEventListener("click", function () {
                vocabQuizInput.innerText += "one's ";
              });
            document
              .querySelector(".toV")
              .removeEventListener("click", function () {
                vocabQuizInput.innerText += "toV ";
              });
            document
              .querySelector(".Ving")
              .removeEventListener("click", function () {
                vocabQuizInput.innerText += "Ving ";
              });
            document
              .querySelector(".slash")
              .removeEventListener("click", function () {
                vocabQuizInput.innerText += "/";
              });
            document
              .querySelector(".hyphen")
              .removeEventListener("click", function () {
                vocabQuizInput.innerText += "-";
              });
            document
              .querySelector(".dots")
              .removeEventListener("click", function () {
                vocabQuizInput.innerText += "... ";
              });
          }

          const toast = new bootstrap.Toast(
            vocabQuizInf.querySelector(".toast")
          );
          toast.show();

          setTimeout(() => {
            toast.hide();
          }, 6000);

          resolve(input);
          vocabQuizInput.removeEventListener("input", listener);
        }
      });
    });
    vocabQuizInput.value = "";
    if (correctAtFirstTime == true) {
      inputQuesScore++;
    }
  }
  vocabQuizScore.innerText = `${inputQuesScore}/${vocabList.length / 2}`;
  showResult(vocabQuizScore.innerText, incorrectInput);
}

//選擇題
let engList = [];
let chiList = [];
let options = [];
let quesCount = 0;
let quesScore = 0;
let selectCorrectAtFirstTime = true;
let incorrectMulti = [];

function runMultiChoose(vocabList, title) {
  engList = [];
  chiList = [];
  options = [];
  quesCount = 0;
  quesScore = 0;
  multiChoOP1.className = "btn btn-light";
  multiChoOP2.className = "btn btn-light";
  multiChoOP3.className = "btn btn-light";
  multiChoOP4.className = "btn btn-light";
  selectCorrectAtFirstTime = true;
  separateVocabList(vocabList);
  multiChoTitle.innerText = `${quesCount + 1}.${engList[quesCount]}`;
  multiQuizScore.innerText = `${quesScore}/${vocabList.length / 2}`;
  generateOptions();
  shuffleOptions(options);
  buildOptions(vocabList);
  buildEventListeners(vocabList);
}

function separateVocabList(vocabList) {
  for (let i = 0; i < vocabList.length; i += 2) {
    engList.push(vocabList[i]);
    chiList.push(vocabList[i + 1]);
  }
}

function generateOptions() {
  options = [chiList[quesCount]];
  const usedIndex = [quesCount];
  while (options.length < 4) {
    const randIndex = Math.floor(Math.random() * chiList.length);
    if (!usedIndex.includes(randIndex)) {
      options.push(chiList[randIndex]);
      usedIndex.push(randIndex);
    }
  }
}

function shuffleOptions(arr) {
  const shuffledOptions = [...arr];
  const n = shuffledOptions.length;
  for (let i = n - 1; i > 0; i -= 1) {
    const rand = Math.floor(Math.random() * (i + 1));
    [shuffledOptions[i], shuffledOptions[rand]] = [
      shuffledOptions[rand],
      shuffledOptions[i]
    ];
  }
  options = shuffledOptions;
}

function buildOptions() {
  multiChoOP1.innerText = options[0];
  multiChoOP2.innerText = options[1];
  multiChoOP3.innerText = options[2];
  multiChoOP4.innerText = options[3];
}

function buildEventListeners(vocabList) {
  multiChoOP1.addEventListener("click", function () {
    checkAnswer(0, multiChoOP1, vocabList);
  });
  multiChoOP2.addEventListener("click", function () {
    checkAnswer(1, multiChoOP2, vocabList);
  });
  multiChoOP3.addEventListener("click", function () {
    checkAnswer(2, multiChoOP3, vocabList);
  });
  multiChoOP4.addEventListener("click", function () {
    checkAnswer(3, multiChoOP4, vocabList);
  });
}

function checkAnswer(selectedIndex, selectedNode, vocabList) {
  let correctAnswerIndex = 0;
  for (let i = 0; i < options.length; i++) {
    if (options[i] == chiList[quesCount]) {
      correctAnswerIndex = i;
      break;
    }
  }
  const correctAnswerNode = document.getElementById(
    `option-${correctAnswerIndex + 1}`
  );
  correctAnswerNode.className = "btn btn-success";

  if (options[selectedIndex] === chiList[quesCount]) {
    if (selectCorrectAtFirstTime === true) {
      quesScore++;
    } else {
      selectCorrectAtFirstTime = false;
      if (!incorrectMulti.includes(engList[quesCount])) {
        incorrectMulti.push(engList[quesCount]);
        incorrectMulti.push(chiList[quesCount]);
      }
    }
    setTimeout(() => {
      selectCorrectAtFirstTime = true;
      multiChoOP1.className = "btn btn-light";
      multiChoOP2.className = "btn btn-light";
      multiChoOP3.className = "btn btn-light";
      multiChoOP4.className = "btn btn-light";
      if (quesCount < engList.length - 1) {
        if (selectCorrectAtFirstTime == true) {
          quesCount++;
        }
        multiChoTitle.innerText = `${quesCount + 1}.${engList[quesCount]}`;
        multiQuizScore.innerText = `${quesScore}/${vocabList.length / 2}`;
        generateOptions();
        shuffleOptions(options);
        buildOptions();
      } else {
        multiQuizScore.innerText = `${quesScore}/${vocabList.length / 2}`;
        showResult(multiQuizScore.innerText, incorrectMulti);
      }
    }, 250);
  } else {
    selectedNode.className = "btn btn-danger";
    selectCorrectAtFirstTime = false;
  }
}

//公布結果
function showResult(score, incorrectList) {
  quizSection.innerHTML = "";
  quizSection.style = "height: 0px;";
  resultSection.style = "display: block;";
  reviewToast.style = "display: block;";
  errorToast.style = "display: block;";
  incorrectList.style = "display: none;";

  resultAlert.innerHTML = `<i class="fa-solid fa-hands-clapping">   SCORE ： ${score}</i> `;
  if (incorrectList.length >= 2) {
    incorrectList.class = "display: block;";
    fillIncorrectList(incorrectList);
  } else {
    incorrectList.class = "display: none;";
  }
}

function fillIncorrectList(vocabList, title) {
  for (let i = 0; i < vocabList.length; i++) {
    incorrectList.innerHTML += `<li class="list-group-item d-flex justify-content-between align-items-start">
    <div class="ms-2 me-auto">
      <div class="fw-bold vocabListItem">
        ${vocabList[i]}
      </div>
      <div>${vocabList[(i += 1)]}</div>
    </div>
      </li>`;
  }
}

</script>
